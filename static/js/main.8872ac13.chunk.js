(this["webpackJsonpmovies_shows-app"]=this["webpackJsonpmovies_shows-app"]||[]).push([[0],{59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(9),s=a.n(r),i=a.p+"static/media/header-icon.090099a4.png",o=a(1),u=function(){return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)("img",{className:"header__icon",src:i,alt:"movie-icon"}),Object(o.jsx)("h1",{className:"header__title",children:"Movies/TV shows app"})]})},l=a(4),d=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.DataType}));return Object(o.jsxs)("div",{className:"toggler",children:[Object(o.jsx)("button",{className:"toggler__cta ".concat("movie"===t?"toggler__cta--active":""),id:"moviesBtn",onClick:function(){e({type:"MOVIE",payload:"movie"})},children:"Top rated movies"}),Object(o.jsx)("button",{className:"toggler__cta ".concat("tv"===t?"toggler__cta--active":""),id:"showsBtn",onClick:function(){e({type:"TV",payload:"tv"})},children:"Top rated TV shows"})]})},j=a(5),b=a(8),O=a.n(b),h=a(13),v=a(14),p=a.n(v),g=a(25),f=a.n(g),m=function(){var e=Object(l.b)(),t=(Object(l.c)((function(e){return e.SearchList})),Object(c.useState)(1)),a=Object(j.a)(t,2),n=a[0],r=(a[1],function(t){t.target.value.length>1&&e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var a=Object(h.a)(O.a.mark((function a(c){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:"SEARCH_DATA_LOADING"}),a.next=4,p.a.get("https://api.themoviedb.org/3/search/multi?api_key=f3e3f5a585f49807aa021686153ceaf6&language=en-US&query=".concat(e,"&page=").concat(t,"&include_adult=false"));case 4:n=a.sent,c({type:"SEARCH_DATA_SUCCESS",payload:n.data,query:e}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),c({type:"SEARCH_DATA_FAILED"});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(t.target.value.toLowerCase(),n))}),s=Object(c.useMemo)((function(){return f()(r,300)}),[]);return Object(o.jsx)("div",{className:"search-bar",children:Object(o.jsx)("input",{type:"text",placeholder:"Search movies/TV shows...",className:"search-bar__input",onChange:s})})},_=a(15),A=function(e){return Object(o.jsxs)("div",{className:"item",children:[Object(o.jsx)("img",{className:"item__thumbnail",src:"https://image.tmdb.org/t/p/w400".concat(e.item.backdrop_path),alt:e.item.title}),Object(o.jsx)("p",{className:"item__title",children:e.item.title||e.item.name}),Object(o.jsx)("p",{className:"item__ratings",children:e.item.vote_average})]})},y=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.DataList})),a=Object(l.c)((function(e){return e.DataType})),n=Object(l.c)((function(e){return e.SearchList})),r=Object(c.useState)(0),s=Object(j.a)(r,2),i=s[0],u=s[1],d=Object(c.useState)(1),b=Object(j.a)(d,2),v=b[0],g=b[1],f=Object(c.useState)(10),m=Object(j.a)(f,2),y=m[0],x=m[1],S=Object(c.useState)([]),D=Object(j.a)(S,2),T=D[0],N=D[1],E=Object(c.useState)([]),w=Object(j.a)(E,2),C=w[0],L=w[1];Object(c.useEffect)((function(){N([]),L([]),u(0),g(1),x(10)}),[a]),Object(c.useEffect)((function(){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"movie",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var a=Object(h.a)(O.a.mark((function a(c){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c({type:"DATA_LOADING"}),a.next=4,p.a.get("https://api.themoviedb.org/3/".concat(e,"/top_rated?api_key=f3e3f5a585f49807aa021686153ceaf6&language=en-US&page=").concat(t));case 4:n=a.sent,c({type:"DATA_SUCCESS",payload:n.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),c({type:"DATA_FAILED"});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(a,v))}),[a,v]);var M=function(e,a){if(void 0!==t.data.results){var c=!1,n=[];t.data.results.slice(i,y).forEach((function(t){-1!==e.indexOf(t)?c=!0:-1===e.indexOf(t)&&n.push(t)})),c||("movie"===a?N(0===i&&1===v?n:function(e){return[].concat(Object(_.a)(e),n)}):"tv"===a&&L(0===i&&1===v?n:function(e){return[].concat(Object(_.a)(e),n)}))}};Object(c.useEffect)((function(){"movie"===a?M(T,"movie"):"tv"===a&&M(C,"tv")}),[t.data.results,i]);return Object(o.jsxs)("section",{className:"items_section",children:[function(){if(t.loading)return Object(o.jsxs)("div",{className:"loading",children:[Object(o.jsx)("h2",{children:"Loading..."}),Object(o.jsx)("div",{className:"loading__loader"})]});var e={};return n.data.results&&n.query.length>2?(n.data.results.sort((function(e,t){return t.vote_average-e.vote_average})),e=n.data.results):void 0!==T&&"movie"===a&&n.query.length<=2?(e={},e=T):void 0!==C&&"tv"===a&&n.query.length<=2&&(e={},e=C),Object(o.jsx)("div",{className:"items_list",children:e.map((function(e){return Object(o.jsx)(A,{item:e},e.id)}))})}(),Object(o.jsx)("button",{className:"items_load_cta",onClick:function(){var e=0;"movie"===a?e=T.length:"tv"===a&&(e=C.length),e%20===0?(g(v+1),u(0),x(10)):(u(i+10),x(y+10))},children:"Load more"})]})},x=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(u,{}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(m,{}),Object(o.jsx)(d,{}),Object(o.jsx)(y,{})]})]})},S=a(6),D=a(26),T=a(27),N=a(2),E={loading:!1,data:[],errorMessage:""},w={loading:!1,data:[],query:"",errorMessage:""},C="movie",L=Object(S.combineReducers)({DataList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_LOADING":return Object(N.a)(Object(N.a)({},e),{},{loading:!0,errorMessage:""});case"DATA_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{loading:!1,data:t.payload,errorMessage:""});case"DATA_FAILED":return Object(N.a)(Object(N.a)({},e),{},{loading:!1,errorMessage:"Sorry! There was an error!"});default:return e}},SearchList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_DATA_LOADING":return Object(N.a)(Object(N.a)({},e),{},{loading:!0,errorMessage:""});case"SEARCH_DATA_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{loading:!1,data:t.payload,query:t.query,errorMessage:""});case"SEARCH_DATA_FAILED":return Object(N.a)(Object(N.a)({},e),{},{loading:!1,errorMessage:"Sorry! There was an error!"});default:return e}},DataType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIE":case"TV":return t.payload;default:return e}}}),M=Object(S.createStore)(L,Object(D.composeWithDevTools)(Object(S.applyMiddleware)(T.a)));a(59);s.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(l.a,{store:M,children:Object(o.jsx)(x,{})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.8872ac13.chunk.js.map